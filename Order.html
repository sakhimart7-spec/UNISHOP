<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Hero Layout</title>
<link rel="stylesheet" href="footer.css">
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
<style>

/* RESET */
*{
    margin:0;
    padding:0;
    box-sizing:border-box;
    font-family: 'Inter', sans-serif;
}

body{
    overflow-x:hidden;
}

/* HERO SECTION */
.hero{
    position:relative;
    width:100%;
    height:80px;
    overflow:hidden;
    background-color: #111;
}

/* VIDEO BACKGROUND */
.hero video{
    position:absolute;
    width:100%;
    height:100%;
    object-fit:cover;
}

/* DARK OVERLAY */
.hero::after{
    content:'';
    position:absolute;
    width:100%;
    height:100%;
    background:rgba(0,0,0,0.25);
    top:0;
    left:0;
    z-index:-1;
}

/* NAVBAR */
.navbar{
    position:absolute;
    top:0;
    left:0;
    width:100%;
    padding:20px 5%;
    display:flex;
    justify-content:space-between;
    align-items:center;
    color:#fff;
}

/* LOGO */
.logo img{
    height:40px;
}

/* NAV LINKS */
.nav-links{
    display:flex;
    gap:40px;
    font-weight:500;
    letter-spacing:1px;
}

.nav-links a{
    text-decoration:none;
    color:#fff;
    font-size:14px;
    position:relative;
}

.nav-links a::after{
    content:'';
    position:absolute;
    left:0;
    bottom:-5px;
    width:0%;
    height:2px;
    background:#fff;
    transition:0.3s;
}

.nav-links a:hover::after{
    width:100%;
}

/* ICONS */
.nav-icons{
    display:flex;
    gap:25px;
    align-items:center;
}

.nav-icons i{
    font-size:18px;
    cursor:pointer;
    color:#ffffff !important;
    transition:0.3s;
}

.nav-icons i:hover{
    opacity:0.7;
}

/* MENU TOGGLE (MOBILE) */
.menu-toggle{
    display:none;
    font-size:24px;
    cursor:pointer;
}



/* MOBILE MENU */
.mobile-menu{
    position:fixed;
    top:0;
    right:-100%;
    width:70%;
    height:100%;
    background:#000;
    color:#fff;
    padding:80px 30px;
    transition:0.4s ease;
    display:flex;
    flex-direction:column;
    gap:30px;
    z-index:999;
}

.mobile-menu a{
    text-decoration:none;
    color:#fff;
    font-size:18px;
}

.mobile-menu.active{
    right:0;
}

.mobile-header{
    position:absolute;
    top:20px;
    right:25px;
}

.mobile-header i{
    font-size:22px;
    cursor:pointer;
    color:#fff;
}

/* RESPONSIVE */
@media(max-width:992px){

    .nav-links{
        display:none;
    }

    .menu-toggle{
        display:block;
    }

    .hero-content h1{
        font-size:30px;
    }

    .hero-content{
        bottom:15%;
    }
  
}



















.user-dropdown {
    position: absolute;
    top: 60px; /* adjust based on navbar height */
    right: 20px;
    width: 220px;
    background: #111; /* dark theme */
    color: #fff;
    border-radius: 12px;
    padding: 15px;
    box-shadow: 0 8px 20px rgba(0,0,0,0.4);
    display: none;
    z-index: 9999;
    font-family: 'Poppins', sans-serif;
}

.user-dropdown img {
    width: 50px;
    height: 50px;
    border-radius: 50%;
    margin-bottom: 10px;
    object-fit: cover;
}

.user-dropdown .user-name {
    font-weight: bold;
    margin-bottom: 5px;
    word-break: break-word;   /* Wrap long words */
    white-space: normal;   
}

.user-dropdown .user-email {
    font-size: 0.85rem;
    margin-bottom: 10px;
    opacity: 0.8;
    word-break: break-word;   /* Wrap long words */
    white-space: normal;   
}

.user-dropdown button, .user-dropdown a {
    width: 100%;
    padding: 10px;
    border: none;
    border-radius: 8px;
    margin-top: 5px;
    cursor: pointer;
    text-align: center;
    display: block;
    text-decoration: none;
    color: #111;
    background: #fff;
    font-weight: bold;
    transition: 0.3s;
}

.user-dropdown button:hover, .user-dropdown a:hover {
    background: #ddd;
}






.orders-section {
  max-width: 1200px;
  margin: 40px auto;
  padding: 0 20px;
}
.order-card {
  border: 1px solid #ddd;
  border-radius: 12px;
  padding: 20px;
  margin-bottom: 20px;
  box-shadow: 0 5px 15px rgba(0,0,0,0.05);
}
.order-card h4 { margin: 0 0 10px; }
.order-card p { margin: 5px 0; }
.delivery-bar {
  height: 10px;
  background: #eee;
  border-radius: 5px;
  overflow: hidden;
  margin: 10px 0;
}
.delivery-progress {
  height: 100%;
  width: 0%;
  background: green;
  transition: width 0.5s ease;
}
.order-actions {
  margin-top: 10px;
}
.order-actions button {
  background: #ff4d4f;
  color: #fff;
  padding: 8px 16px;
  border: none;
  border-radius: 6px;
  cursor: pointer;
}
.order-actions button:hover { opacity: 0.9; }






.delivery-stages {
  display: flex;
  justify-content: space-between;
  align-items: flex-start; /* align labels above line */
  position: relative;
  margin: 20px 0;
  padding-top: 20px; /* space for labels above dots */
}

.delivery-stages::before {
  content: '';
  position: absolute;
  top: 18px; /* position line under labels */
  left: 0;
  width: 100%;
  height: 4px;
  background: #ccc;
  z-index: 1;
}

.delivery-stages::after {
  content: '';
  position: absolute;
  top: 18px;
  left: 0;
  height: 4px;
  background: green;
  width: var(--fill, 0%);
  z-index: 2;
  transition: width 0.5s ease;
}

.stage {
  text-align: center;
  flex: 1;
  position: relative;
  z-index: 3;
}

.stage-dot {
  width: 16px;
  height: 16px;
  border-radius: 50%;
  background: #ccc;
  margin: 0 auto;
}

.stage.completed .stage-dot {
  background: green;
}

.stage-label {
  display: block;
  font-size: 12px;
  margin-bottom: 6px; /* space between label and dot */
  font-weight: 500;
  margin-top: 8px;
}

/* Responsive */
@media (max-width: 600px) {
  .stage-label {
    font-size: 10px;
  }
  .stage-dot {
    width: 12px;
    height: 12px;
  }
  .delivery-stages::before, .delivery-stages::after {
    top: 16px;
    height: 3px;
  }
}
</style>
</head>
<body>

<section class="hero">

 
    <!-- NAVBAR -->
    <div class="navbar">

        <!-- LOGO (Replace image) -->
        <div class="logo">
            <img src="images/icon.png" alt="logo">
        </div>

        <!-- CENTER NAV -->
        <div class="nav-links">
            <a href="/">Home</a>
            <a href="/orders">Orders</a>
            <a href="#">Terms & Conditions</a>
            <a href="#">Privacy Policies</a>
        </div>

        <!-- RIGHT ICONS -->
     <div class="nav-icons">
   <i class="fa-solid fa-magnifying-glass" onclick="RedirectSearch()"></i>
  
    <i class="fa-regular fa-user" id="userIcon"></i>
    <i class="fa-solid fa-bag-shopping"></i>
    <div class="menu-toggle" onclick="toggleMenu()">
        <i class="fa-solid fa-bars"></i>
    </div>
</div>
    </div>



</section>









<!-- User Dropdown -->
<div id="userDropdown" class="user-dropdown">
    <!-- Filled dynamically by JS -->
</div>







<!-- MOBILE MENU -->
<div class="mobile-menu" id="mobileMenu">

    <div class="mobile-header">
        <i class="fa-solid fa-xmark" onclick="toggleMenu()"></i>
    </div>

                <a href="/">Home</a>
            <a href="">Orders</a>
            <a href="#">Terms & Conditions</a>
            <a href="#">Privacy Policies</a>

</div>







<section class="orders-section">
  <center><h2>My Orders</h2></center><br>
  <div id="ordersContainer">
    <!-- Orders will load here dynamically -->
  </div>
</section>



<!-- Footer Section -->
<footer class="footer">
  <div class="footer-container">

    <!-- SakhiMart Club Section -->
    <div class="footer-club">
      <img src="images/icon.png" alt="SakhiMart Logo" class="footer-logo">
      <h2>SAKHIMART CLUB <br> WILL SURPRISE YOU</h2>
      <p>Benefits and plenty of surprises are waiting for you!<br>Sign up now</p>
      <a href="#" class="footer-btn">Discover more</a>
    </div>

    <!-- Footer Columns -->
    <div class="footer-columns">

      <!-- Support -->
      <div class="footer-col">
        <h4>Support</h4>
        <ul>
          <li><a href="#">Contact Us</a></li>
          <li><a href="#">Chat with us</a></li>
          <li><a href="#">FAQ</a></li>
        </ul>
      </div>

      <!-- Exclusive Service -->
      <div class="footer-col">
        <h4>Exclusive Service</h4>
        <ul>
          <li><a href="#">Check / Return Order</a></li>
          <li><a href="#">Invite SakhiMart On Wheels</a></li>
          <li><a href="#">COVID Safety Guidelines</a></li>
          <li><a href="#">SakhiMart Loyalty</a></li>
          <li><a href="#">SakhiMart Franchise</a></li>
        </ul>
      </div>

      <!-- Company -->
      <div class="footer-col">
        <h4>Company</h4>
        <ul>
          <li><a href="#">About Us</a></li>
          <li><a href="#">SakhiMart Worldwide</a></li>
          <li><a href="#">CSR</a></li>
          <li><a href="#">Awards & Recognition</a></li>
          <li><a href="#">Become Our Partner</a></li>
          <li><a href="#">Careers</a></li>
        </ul>
      </div>

      <!-- Legals -->
      <div class="footer-col">
        <h4>Legals</h4>
        <ul>
          <li><a href="#">Terms and Conditions</a></li>
          <li><a href="#">Press Release</a></li>
          <li><a href="#">Privacy Policy</a></li>
          <li><a href="#">Cookie Policy</a></li>
          <li><a href="#">Whistle Blow Policy</a></li>
          <li><a href="#">POSH Policy</a></li>
          <li><a href="#">Investor Relations</a></li>
          <li><a href="#">Extract of Form 5A (EPFO Code)</a></li>
        </ul>
      </div>

    </div>
  </div>

  <!-- Bottom Row -->
  <div class="footer-bottom">
    <div class="footer-bottom-left">
      <a href="#"><span>üìç</span>Find a Store</a>
      <a href="#"><span>üåê</span>India | English</a>
    </div>
    <div class="footer-bottom-right">
      <a href="#" class="fab">&#xf09a;</a>
      <a href="#" class="fab">&#xf16d;</a>
      <a href="#" class="fab">&#xf16a;</a>
      <a href="#" class="fab">&#xf0d2;</a>
      <a href="#" class="fab">&#xf08c;</a>
      <a href="#" class="fab">&#xf099;</a>
    </div>
  </div>

  <p class="footer-copy">¬© 2026 SakhiMart Brand ‚Äì SakhiMart India ‚Äì CIN: L19201WB1931PLC007261</p>
</footer>




<script>


const mobileMenu = document.getElementById("mobileMenu");

function toggleMenu(){
    mobileMenu.classList.toggle("active");
}

window.addEventListener("click", function(e){
    if(!mobileMenu.contains(e.target) && 
       !e.target.closest(".menu-toggle")){
        mobileMenu.classList.remove("active");
    }
});







function RedirectCart(){
    window.location.href="/cart"
}




function RedirectSearch(){
    window.location.href = "/";
}





// Toggle dropdown on user icon click
const userIcon = document.getElementById("userIcon");
const userDropdown = document.getElementById("userDropdown");

userIcon.addEventListener("click", () => {
    userDropdown.style.display = userDropdown.style.display === "block" ? "none" : "block";
});

// Close dropdown if clicked outside
window.addEventListener("click", (e) => {
    if(!userDropdown.contains(e.target) && e.target !== userIcon){
        userDropdown.style.display = "none";
    }
});

// Render user info
function renderUserDropdown() {
    const token = localStorage.getItem("token");
    const name = localStorage.getItem("userName");
    const email = localStorage.getItem("userEmail");

    if(token && name && email){
        userDropdown.innerHTML = `
            <img src="https://cdn.pixabay.com/photo/2015/10/05/22/37/blank-profile-picture-973460_1280.png" alt="DP">
            <div class="user-name">${name}</div>
            <div class="user-email">${email}</div>
            <button onclick="logout()">Logout</button>
        `;
    } else {
        userDropdown.innerHTML = `
            <div style="text-align:center; margin-bottom:10px;">Not signed in</div>
            <a href="/login">Sign In</a>
        `;
    }
}

// Logout function
function logout(){
    localStorage.removeItem("token");
    localStorage.removeItem("userName");
    localStorage.removeItem("userEmail");
    renderUserDropdown();
    // Optional: redirect to login page
    window.location.href = "/login";
}

// Initial render
renderUserDropdown();






async function loadUserOrders() {
  const userEmail = localStorage.getItem("userEmail");
  if (!userEmail) {
    document.getElementById("ordersContainer").innerHTML = "<p>Please login to see your orders.</p>";
    return;
  }

  try {
    // Fetch all orders for this email
    const res = await fetch(`/api/orders?email=${encodeURIComponent(userEmail)}`);
    const orders = await res.json();

    if (!orders || orders.length === 0) {
      document.getElementById("ordersContainer").innerHTML = "<p>No orders found.</p>";
      return;
    }

    const container = document.getElementById("ordersContainer");
    container.innerHTML = "";
orders.forEach(order => {
  const container = document.getElementById("ordersContainer");

  const orderCard = document.createElement("div");
  orderCard.classList.add("order-card");

  // Create progress stages
let completedStages = order.delivery.filter(s => s.status).length;
let totalStages = order.delivery.length;
let linePercent = (completedStages / totalStages) * 100;

let stagesHTML = `<div class="delivery-stages" style="--fill:${linePercent}%;">`;
order.delivery.forEach(stage => {
  stagesHTML += `
    <div class="stage ${stage.status ? 'completed' : ''}">
      <span class="stage-dot"></span>
      <span class="stage-label">${stage.stage}</span>
    </div>
  `;
});
stagesHTML += `</div>`;

  orderCard.innerHTML = `
    <h4>${order.product.title}</h4>
    <p>Quantity: ${order.product.qty}</p>
    <p>Unit Price: ‚Çπ${order.product.price}</p>
    <p>Total: ‚Çπ${order.product.price * order.product.qty}</p>
    <p>Delivery To: ${order.customer.name}, ${order.customer.address}, Phone: ${order.customer.phone}</p>

    ${stagesHTML}

    <div class="order-actions">
      <button class="cancel-btn">Cancel / Remove</button>
    </div>
  `;

  // Cancel / remove button
  const cancelBtn = orderCard.querySelector(".cancel-btn");
  cancelBtn.addEventListener("click", async () => {
    const confirmCancel = confirm(`Do you want to cancel the order for "${order.product.title}"?`);
    if (!confirmCancel) return;

    // Remove from DB
    try {
      const res = await fetch(`/api/order/${order._id}`, { method: "DELETE" });
      const data = await res.json();
      if (data.success) {
        alert("‚úÖ Order removed successfully!");
        orderCard.remove();
      } else {
        alert("‚ùå Failed to remove order.");
      }
    } catch (err) {
      console.error(err);
      alert("‚ùå Error removing order.");
    }
  });

  container.appendChild(orderCard);
});

  } catch(err) {
    console.error(err);
    document.getElementById("ordersContainer").innerHTML = "<p>Failed to load orders.</p>";
  }
}

// Cancel order opens WhatsApp pre-filled
function cancelOrder(orderId, productTitle, qty, price) {
  const name = prompt("Please enter your name for cancellation message:");
  const phone = prompt("Your phone number:");
  const email = localStorage.getItem("userEmail");

  if (!name || !phone) return alert("Name and phone required.");

  const totalPrice = qty * price;
  const message = `Hello, I want to cancel my order:
*Product:* ${productTitle}
*Quantity:* ${qty}
*Total Price:* ‚Çπ${totalPrice}
*Name:* ${name}
*Phone:* ${phone}
*Email:* ${email}`;

  window.open(`https://wa.me/917076119520?text=${encodeURIComponent(message)}`, "_blank");
}

// Load orders on page load
window.addEventListener("load", loadUserOrders);




</script>

</body>
</html>